[13:03:14] INFO Created directory structure: /Users/gadmohamed/Desktop/LMS/aiagent/data and /Users/gadmohamed/Desktop/LMS/aiagent/data/references
[13:03:16] INFO Testing against: https://lms-swart-five.vercel.app (VERCEL)
[13:03:16] INFO [test_server_health] Testing server health
[13:03:16] INFO [test_server_health] Profile endpoint response: 401, {"detail":"Not authenticated"}
[13:03:16] INFO [test_server_health] Root endpoint response: 200, {"message":"LMS API is running"}
[13:03:16] INFO [test_server_health] Server is responding to requests
[13:03:16] INFO [test_upload_file] START
[13:03:16] INFO [registerUser] Registering user: None
[13:03:16] INFO [registerUser] Sending request to https://lms-swart-five.vercel.app/register with user data: {'username': 'testuser_050bbb8a', 'password': 'testpass123'}
[13:03:17] INFO [registerUser] Response status: 200, raw response: {"message":"Registered successfully","userId":870}
[13:03:17] INFO [registerUser] JSON response: {'message': 'Registered successfully', 'userId': 870}
[13:03:17] INFO [loginUser] Logging in user: {'username': 'testuser_050bbb8a', 'password': 'testpass123'}
[13:03:18] INFO [loginUser] Response status: 200, body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcl8wNTBiYmI4YSIsImV4cCI6MTc0NjkwMDE5OH0.PBMnb7A2WUVK-jQAdzmEWzv0HR_NQbFahjQZrcf8VbQ', 'token_type': 'bearer'}
[13:03:18] INFO [test_upload_file] Uploading file: testfile.txt
[13:03:18] INFO [test_upload_file] Response status: 200, body: {'filename': 'testfile.txt', 'size': 11, 'fileId': 434, 'content_type': 'text/plain', 'version': 1, 'uploaded_at': '2025-05-10T17:03:18.877565'}
[13:03:18] INFO [test_upload_file] END
[13:03:18] INFO [test_active_url_success] START
[13:03:18] INFO [test_active_url_success] Payload: {'url': 'https://example.com', 'title': 'Example Page'}
[13:03:19] INFO [test_active_url_success] Response status: 200, body: {'data': {'status': 'success'}}
[13:03:19] INFO [test_active_url_success] END
[13:03:19] INFO [test_active_url_missing_url] START
[13:03:19] INFO [test_active_url_missing_url] Payload: {'title': 'Example Page'}
[13:03:19] INFO [test_active_url_missing_url] Response status: 400, body: {'error': 'Missing URL'}
[13:03:19] INFO [test_active_url_missing_url] END
[13:03:19] INFO [test_profile] START
[13:03:19] INFO [registerUser] Registering user: None
[13:03:19] INFO [registerUser] Sending request to https://lms-swart-five.vercel.app/register with user data: {'username': 'testuser_ffff4877', 'password': 'testpass123'}
[13:03:20] INFO [registerUser] Response status: 200, raw response: {"message":"Registered successfully","userId":871}
[13:03:20] INFO [registerUser] JSON response: {'message': 'Registered successfully', 'userId': 871}
[13:03:20] INFO [loginUser] Logging in user: {'username': 'testuser_ffff4877', 'password': 'testpass123'}
[13:03:21] INFO [loginUser] Response status: 200, body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcl9mZmZmNDg3NyIsImV4cCI6MTc0NjkwMDIwMX0.yipVWawnofqke63TUO6GPEpZAImQ5o71PcaP1JFmdmM', 'token_type': 'bearer'}
[13:03:21] INFO [test_profile] Response status: 200, body: {'userId': 871, 'username': 'testuser_ffff4877', 'max_file_size': 524288000, 'role': 0}
[13:03:21] INFO [test_profile] Cleanup delete response for testuser_ffff4877: 200
[13:03:21] INFO [test_profile] END
[13:03:21] INFO [testQueryEndpoint] START
[13:03:21] INFO [registerUser] Registering user: None
[13:03:21] INFO [registerUser] Sending request to https://lms-swart-five.vercel.app/register with user data: {'username': 'testuser_cb51ca2f', 'password': 'testpass123'}
[13:03:22] INFO [registerUser] Response status: 200, raw response: {"message":"Registered successfully","userId":872}
[13:03:22] INFO [registerUser] JSON response: {'message': 'Registered successfully', 'userId': 872}
[13:03:22] INFO [loginUser] Logging in user: {'username': 'testuser_cb51ca2f', 'password': 'testpass123'}
[13:03:23] INFO [loginUser] Response status: 200, body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcl9jYjUxY2EyZiIsImV4cCI6MTc0NjkwMDIwM30.kHGucK3e9fmrbKIjL6TfREwAPp3CQOHQHfP1z4BUAEA', 'token_type': 'bearer'}
[13:03:23] INFO [testQueryEndpoint] Case 1: Missing JSON body
[13:03:23] INFO [testQueryEndpoint] Case 1 Response: 400, {"error":"Empty request body"}
[13:03:23] INFO [testQueryEndpoint] Case 2: Missing 'query' field
[13:03:23] INFO [testQueryEndpoint] Case 2 Response: 400, {"error":"No query provided"}
[13:03:23] INFO [testQueryEndpoint] Case 3: Missing 'chatId' field
[13:03:24] INFO [testQueryEndpoint] Case 3 Response: 400, {"error":"No chat ID provided"}
[13:03:24] INFO [testQueryEndpoint] Case 4: Valid request
[13:03:26] INFO [testQueryEndpoint] Case 4 Response: 200, {"response":"Thank you for providing your new phone number. If you need any assistance with updating it on any platforms or accounts, feel free to let me know. How can I assist you further today?","query":"I have changed my phone number to 807-555-5555\n\nHere is the page content: Some content","chat_id":"chat1","queryId":69}
[13:03:26] INFO [testQueryEndpoint] END
[13:03:26] INFO [test_delete_user] START
[13:03:26] INFO [test_delete_user] Registering user: {'username': 'testuser_02688088', 'password': 'testpass123'}
[13:03:26] INFO [registerUser] Registering user: {'username': 'testuser_02688088', 'password': 'testpass123'}
[13:03:26] INFO [registerUser] Sending request to https://lms-swart-five.vercel.app/register with user data: {'username': 'testuser_02688088', 'password': 'testpass123'}
[13:03:27] INFO [registerUser] Response status: 200, raw response: {"message":"Registered successfully","userId":873}
[13:03:27] INFO [registerUser] JSON response: {'message': 'Registered successfully', 'userId': 873}
[13:03:27] INFO [loginUser] Logging in user: {'username': 'testuser_02688088', 'password': 'testpass123'}
[13:03:28] INFO [loginUser] Response status: 200, body: {'access_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlcl8wMjY4ODA4OCIsImV4cCI6MTc0NjkwMDIwOH0.QJdErkUzYviBUEkSGX2vb6agg99tRwr-rXlcZ1Gjhck', 'token_type': 'bearer'}
[13:03:28] INFO [test_delete_user] Deleting user testuser_02688088 (self-delete)
